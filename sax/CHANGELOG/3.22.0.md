# SAX v3.22.0 - 2025-11-27

## Summary

Orchestrator-First Policy 강화. 모든 SAX 패키지(PO, Meta, Next)에서 Orchestrator 메시지 없이는 어떤 응답도 하지 않도록 강제 규칙 적용. CLAUDE.md에서 라우팅 테이블 제거하고 Orchestrator가 직접 라우팅 판단.

## Changed

### Orchestrator-First Policy 강화 (전 패키지)

- **정책 강도 상향**: `⚠️ 핵심 규칙` → `🚨 강제 규칙`
- **절대 금지 섹션 추가**: Orchestrator 메시지 없이 응답/Agent 호출/Skill 실행/코드 제공 금지
- **위반 처리 방침 명시**: 위반 시 응답 무효, Orchestrator부터 재시작
- **시스템 메시지 체이닝 룰**: Orchestrator → Agent 위임 → Agent 호출 → Skill → Reference 체인 명시

### CLAUDE.md 라우팅 테이블 제거

- **SAX-PO**: 주요 라우팅 테이블 삭제, Orchestrator 직접 판단으로 변경
- **SAX-Meta**: 주요 라우팅 테이블 삭제, Orchestrator 직접 판단으로 변경
- **SAX-Next**: 라우팅 테이블 없었음, Orchestrator 직접 판단 명시 추가

### 중복 섹션 정리

- **SAX-PO**: 중복된 Orchestrator-First Policy 섹션 통합

## Before/After

### Before (v3.21.0)

```markdown
## Orchestrator-First Policy (필수)

> ⚠️ **핵심 규칙**: ... 모든 요청이 Orchestrator를 먼저 거쳐야 합니다.

### 주요 라우팅

| 요청 유형 | 위임 대상 | 키워드 |
|----------|-----------|--------|
| Epic 생성 | epic-master | "Epic 만들어" |
...
```

### After (v3.22.0)

```markdown
## Orchestrator-First Policy (필수)

> 🚨 **강제 규칙**: ... **Orchestrator 메시지 없이 그 어떤 응답도 하지 않습니다.**

### ❌ 절대 금지

- Orchestrator 메시지 없이 바로 응답
- Orchestrator 메시지 없이 Agent 호출
...

### Agent Routing

라우팅 판단은 [Orchestrator Agent](agents/orchestrator.md)가 직접 수행합니다.

CLAUDE.md에는 라우팅 테이블을 두지 않으며, Orchestrator가 요청의 의도를 분석하여 적절한 Agent로 위임합니다.
```

## Rationale

### 문제 상황

기존 구조에서 Claude가 Orchestrator 메시지 출력을 생략하고 바로 작업을 수행하는 사례 발생.
예: "7번 에픽 Task 프리뷰 보여줘" 요청 시 `[SAX] Orchestrator:` 없이 바로 프리뷰 생성.

### 해결 방안

1. **강제 규칙 명시**: "절대 금지" 섹션으로 예외 없음 명확화
2. **라우팅 테이블 제거**: CLAUDE.md에서 키워드 기반 테이블 제거로 컨텍스트 경량화
3. **Orchestrator 위임**: 라우팅 판단은 Orchestrator가 직접 수행하도록 변경

## Files Changed

```
sax/packages/sax-po/CLAUDE.md        [UPDATED] - Orchestrator-First 강화, 라우팅 테이블 제거
sax/packages/sax-meta/CLAUDE.md      [UPDATED] - Orchestrator-First 강화, 라우팅 테이블 제거
sax/packages/sax-next/CLAUDE.md      [UPDATED] - Orchestrator-First 강화
.claude/sax-po/CLAUDE.md             [SYNCED]
.claude/sax-meta/CLAUDE.md           [SYNCED]
```

## References

- [SAX Core MESSAGE_RULES.md](../core/MESSAGE_RULES.md)
- [SAX Core PRINCIPLES.md](../core/PRINCIPLES.md)
