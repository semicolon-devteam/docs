# SAX v3.23.0

> Release Date: 2025-11-27

## Overview

**Source of Truth (SoT) 원칙 강화 및 Core 참조 구조 리팩토링**

이번 버전에서는 SAX 패키지 간 중복 콘텐츠를 제거하고, Core를 Single Source of Truth로 확립했습니다. 각 패키지의 CLAUDE.md는 이제 `@sax-core/` import를 통해 Core 문서를 참조합니다.

## Added

### Core 배포 자동화

- `deploy.sh`가 모든 패키지 배포 시 `sax-core`를 `.claude/sax-core/` 디렉토리에 자동 배포
- 각 배포 환경에서 로컬 Core 참조 가능 (`@sax-core/PRINCIPLES.md`)

### Core 참조 구조

- 모든 패키지 CLAUDE.md에 Core import 섹션 추가:
  ```markdown
  @sax-core/PRINCIPLES.md
  @sax-core/MESSAGE_RULES.md
  ```

## Changed

### Core 문서 현행화

- **PRINCIPLES.md**: 패키지 계층 구조에 SAX-Meta 추가, CHANGELOG 경로 수정
- **PACKAGING.md**: 전면 재작성 - 현행 패키지 구조 반영, 배포 방식 문서화

### 패키지 CLAUDE.md 리팩토링

| 패키지 | 변경 전 | 변경 후 | 감소율 |
|--------|---------|---------|--------|
| SAX-PO | ~388 lines | ~124 lines | 68% |
| SAX-Next | ~344 lines | ~147 lines | 57% |
| SAX-Meta | ~356 lines | ~128 lines | 64% |

### 제거된 중복 콘텐츠

- Orchestrator-First Policy (~95% 중복) → Core 참조
- 버저닝 규칙 (~90% 중복) → Core 참조
- 메시지 규칙 Quick Reference (~80% 중복) → Core 참조
- SAX Core 상속 원칙 (100% 중복) → Core 참조

### deploy.sh 개선

- `deploy_core()` 함수 추가
- 모든 패키지 배포 함수에서 Core 자동 배포 호출
- 배포 결과에 `sax-core/` 디렉토리 표시

## Migration Guide

### 기존 설치 환경 업데이트

```bash
# docs 레포에서 실행
./sax/scripts/deploy.sh sax-next /path/to/project --update

# 결과 구조
/path/to/project/.claude/
├── sax-core/           # Core 규칙 (NEW)
│   ├── PRINCIPLES.md
│   ├── MESSAGE_RULES.md
│   ├── PACKAGING.md
│   └── TEAM_RULES.md
└── sax-next/           # 패키지
    └── CLAUDE.md
```

### Core 참조 방식 변경

**이전 (gh api 원격 참조)**:
```bash
gh api repos/semicolon-devteam/docs/contents/sax/core/PRINCIPLES.md \
  --jq '.content' | base64 -d
```

**현재 (로컬 import)**:
```markdown
@sax-core/PRINCIPLES.md
@sax-core/MESSAGE_RULES.md
```

## Technical Details

### SoT 위반 분석 결과

| 항목 | 심각도 | 중복률 | 조치 |
|------|--------|--------|------|
| Orchestrator-First Policy | CRITICAL | ~95% | Core 참조 |
| 버저닝 규칙 | HIGH | ~90% | Core 참조 |
| SAX Core 상속 원칙 | MEDIUM | 100% | Core 참조 |
| 메시지 규칙 Quick Reference | MEDIUM | ~80% | Core 참조 |

### 설계 결정

**gh api vs 로컬 배포 비교**:

| 기준 | gh api | 로컬 배포 |
|------|--------|-----------|
| Claude Code @ import | ❌ 불가 | ✅ 가능 |
| 버전 일관성 | ❌ 항상 최신 | ✅ 배포 시점 버전 |
| 오프라인 사용 | ❌ 불가 | ✅ 가능 |
| 컨텍스트 로딩 | ❌ API 호출 필요 | ✅ 즉시 로드 |

→ **결론**: `.claude/sax-core/` 로컬 배포 방식 채택

## References

- [SAX Core - Principles](https://github.com/semicolon-devteam/docs/blob/main/sax/core/PRINCIPLES.md)
- [SAX Core - Packaging](https://github.com/semicolon-devteam/docs/blob/main/sax/core/PACKAGING.md)
- [SAX Changelog Index](https://github.com/semicolon-devteam/docs/blob/main/sax/CHANGELOG/INDEX.md)
